---
title: Sapper, a server side framework with Svelte
---
# {{ page.title }}

## Sapper
* [sapper](https://sapper.svelte.dev/)
* [Building a project with Sapper, a JavaScript app framework](https://www.merixstudio.com/blog/project-sapper-javascript-framework/)
* [Simple Svelte 3 app with router](https://medium.com/swlh/simple-svelte-3-app-with-router-44fe83c833b6)
* [Exploring Sapper + Svelte: A quick tutorial](https://blog.logrocket.com/exploring-sapper-svelte-a-quick-tutorial/)
* [Build a fast reactive blog with Svelte and Sapper](https://www.creativebloq.com/how-to/svelte-and-sapper)

## Sapper with firebase

* [How to host a Sapper.js SSR app on Firebase](https://dev.to/eckhardtd/how-to-host-a-sapper-js-ssr-app-on-firebase-hmb)
* [Sapper - Deploy to Firebase Cloud Functions](https://youtu.be/fxfFMn4VMpQ)
* [migrating to Sapper part 1 - SEO, Twitter Cards, OpenGraph](https://lacourt.dev/2019/06/16)
* [migrating to Sapper part 2 - TDD with Cypress.io](https://lacourt.dev/2019/06/21)
* [migrating to Sapper part 3 - RSS feed](https://lacourt.dev/2019/06/29)
* [migrating to Sapper part 2 bis - Netlify, GitHub Actions with Cypress.io](https://lacourt.dev/2019/06/30)
* <https://github.com/fusionstrings/firebase-functions-sapper>

## A recipe to be tried for firebase
from <https://dev.to/nedwards/comment/h1l7> ...snip -->

Thanks very much for breaking this down.

I also tried following this video, 
<https://youtu.be/fxfFMn4VMpQ>
and found the workflow a bit more manageable when creating a Firebase project. Sources from video <https://github.com/sveltecasts/006-deploy-sapper-to-firebase-cloud-functions>. 

First, and then adding in a new Sapper project. I got through it without 
any issues, on Windows. Would have much preferred it to be a write-up like 
yours though, so here's a summary:

Create a new empty folder, then navigate to it in the VS Code terminal.

```bash
firebase init
```

* functions
* hosting
* use an existing project you've created on Firebase
* no ESLint
* don't install dependencies now
* public directory: functions/static (Sapper project will go into functions folder)
* SPA: no

Move or rename ``package.json``, and delete ``.gitignore`` (sapper will 
create these for us later)

```bash
cd functions
npx degit sveltejs/sapper-template#rollup --force
```

Copy contents of ``scripts`` block (Firebase commands) from old ``package.json`` into ``scripts`` block of new ``package.json`` that was generated by Sapper.
Rename Firebase's ``start`` command to ``fb_start``.

Copy entire ``engines`` block from old to new ``package.json``, and change 
node version to 10.

Copy over contents of ``dependencies`` and ``devDependencies`` blocks.

Delete old ``package.json``, once all Firebase stuff is moved over, and 
save the new Sapper one.

Remove polka from dependencies in ``package.json``.

```bash
npm install --save express
npm install
```

``server.js``:
* import express instead of polka
* change function to: ``const expressServer = express()``...
* change ``.listen`` to ``if (dev) { expressServer.listen`` ... ``}``
* ``export { expressServer }``

``index.js``:
* ``const {expressServer} = require('./__sapper__/build/server/server')``
* ``exports.ssr = functions.https.onRequest(expressServer);``

```bash
npm run build
npm run dev
```

localhost:3000 will show the Firebase default ``index.html`` from static 
folder, which can be deleted.
Page reload will bring up Sapper project.

``firebase.json``:

* ``"rewrites": [ { "source": "**", "function": "ssr" }]``

```bash
npm run build
firebase deploy
```

Visit app and click around, refresh to verify functionality.

Try Postman, send a GET to your project URL.
In output, look for confirmation that content is SSR.

``package.json``:
* ``"deploy": "npm run build && firebase deploy"``

``Nav.svelte``:
* add a new ``li`` to the navbar, for a new page

``routes``:
* create new ``.svelte`` page, and add some quick HTML content

```bash
npm run deploy
```
Verify new content shows.
Run audit from Chrome dev tools.

<-- snip..
