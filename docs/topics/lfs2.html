<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Linux from scratch (Part 2) - My software development cookbook</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">What is it?</a></li><li class="chapter-item expanded affix "><li class="part-title">3D Related</li><li class="chapter-item expanded "><a href="../topics/3d.html"><strong aria-hidden="true">1.</strong> Developing 3D models</a></li><li class="chapter-item expanded "><a href="../topics/cloth.html"><strong aria-hidden="true">2.</strong> Cloth Simulation</a></li><li class="chapter-item expanded affix "><li class="part-title">Frontend Development</li><li class="chapter-item expanded "><a href="../topics/angular.html"><strong aria-hidden="true">3.</strong> Angular, bootstrap, firebase</a></li><li class="chapter-item expanded "><a href="../topics/community.html"><strong aria-hidden="true">4.</strong> Community portal</a></li><li class="chapter-item expanded "><a href="../topics/firebase.html"><strong aria-hidden="true">5.</strong> Firebase matters</a></li><li class="chapter-item expanded "><a href="../topics/firestore.html"><strong aria-hidden="true">6.</strong> Firestore matters</a></li><li class="chapter-item expanded "><a href="../topics/flutter.html"><strong aria-hidden="true">7.</strong> Flutter Apps</a></li><li class="chapter-item expanded "><a href="../topics/flutterreading.html"><strong aria-hidden="true">8.</strong> Flutter matters</a></li><li class="chapter-item expanded "><a href="../topics/fluttersignin.html"><strong aria-hidden="true">9.</strong> Flutter Sign-in for your users</a></li><li class="chapter-item expanded "><a href="../topics/fronend.html"><strong aria-hidden="true">10.</strong> Frontend code development</a></li><li class="chapter-item expanded "><a href="../topics/markdown.html"><strong aria-hidden="true">11.</strong> Markdown renderer and editor in browser</a></li><li class="chapter-item expanded affix "><li class="part-title">Media Development</li><li class="chapter-item expanded "><a href="../topics/audio.html"><strong aria-hidden="true">12.</strong> Audio Processing</a></li><li class="chapter-item expanded "><a href="../topics/broadcasting.html"><strong aria-hidden="true">13.</strong> Broadcasting</a></li><li class="chapter-item expanded "><a href="../topics/movie.html"><strong aria-hidden="true">14.</strong> Movie production tools</a></li><li class="chapter-item expanded "><a href="../topics/music.html"><strong aria-hidden="true">15.</strong> Music</a></li><li class="chapter-item expanded "><a href="../topics/dvd2mp4.html"><strong aria-hidden="true">16.</strong> Converting old DVDs/cd into mp4/mp3</a></li><li class="chapter-item expanded affix "><li class="part-title">Programming Languages</li><li class="chapter-item expanded "><a href="../topics/go.html"><strong aria-hidden="true">17.</strong> Go language</a></li><li class="chapter-item expanded "><a href="../topics/java.html"><strong aria-hidden="true">18.</strong> Java development</a></li><li class="chapter-item expanded "><a href="../topics/java2go.html"><strong aria-hidden="true">19.</strong> Translating Java to Go language</a></li><li class="chapter-item expanded "><a href="../topics/jslib.html"><strong aria-hidden="true">20.</strong> Javascript library</a></li><li class="chapter-item expanded "><a href="../topics/py2js.html"><strong aria-hidden="true">21.</strong> Translating Python to Javascript language</a></li><li class="chapter-item expanded "><a href="../topics/rust.html"><strong aria-hidden="true">22.</strong> Rust language</a></li><li class="chapter-item expanded "><a href="../topics/sapper.html"><strong aria-hidden="true">23.</strong> Sapper, a server side framework with Svelte</a></li><li class="chapter-item expanded "><a href="../topics/ssr.html"><strong aria-hidden="true">24.</strong> Server side and/or Headless rendering</a></li><li class="chapter-item expanded "><a href="../topics/svelte.html"><strong aria-hidden="true">25.</strong> Svelte, firebase</a></li><li class="chapter-item expanded affix "><li class="part-title">Machine Learning</li><li class="chapter-item expanded "><a href="../topics/ai.html"><strong aria-hidden="true">26.</strong> Artificial Intelligence</a></li><li class="chapter-item expanded affix "><li class="part-title">System Development</li><li class="chapter-item expanded "><a href="../topics/cross.html"><strong aria-hidden="true">27.</strong> Cross Compilation</a></li><li class="chapter-item expanded "><a href="../topics/lfs.html"><strong aria-hidden="true">28.</strong> Linux from scratch (Part 1)</a></li><li class="chapter-item expanded "><a href="../topics/lfs2.html" class="active"><strong aria-hidden="true">29.</strong> Linux from scratch (Part 2)</a></li><li class="chapter-item expanded "><a href="../topics/lfs3.html"><strong aria-hidden="true">30.</strong> Linux from scratch (Part 3)</a></li><li class="chapter-item expanded "><a href="../topics/os.html"><strong aria-hidden="true">31.</strong> Custom O/S</a></li><li class="chapter-item expanded affix "><li class="part-title">Content Management</li><li class="chapter-item expanded "><a href="../topics/jekyll.html"><strong aria-hidden="true">32.</strong> Jekyll stuff</a></li><li class="chapter-item expanded "><a href="../topics/hugo.html"><strong aria-hidden="true">33.</strong> Hugo stuff</a></li><li class="chapter-item expanded "><a href="../topics/mdbook.html"><strong aria-hidden="true">34.</strong> mdbook</a></li><li class="chapter-item expanded affix "><li class="part-title">Compilers</li><li class="chapter-item expanded "><a href="../topics/parse.html"><strong aria-hidden="true">35.</strong> Compilers/Parsers</a></li><li class="chapter-item expanded "><a href="../topics/peg.html"><strong aria-hidden="true">36.</strong> Peg Parsers</a></li><li class="chapter-item expanded affix "><li class="part-title">Software Projects</li><li class="chapter-item expanded "><a href="../topics/project.html"><strong aria-hidden="true">37.</strong> How to create a new project in gitlab or github</a></li><li class="chapter-item expanded "><a href="../topics/ubuntu.html"><strong aria-hidden="true">38.</strong> Ubuntu</a></li><li class="chapter-item expanded "><a href="../topics/vscode.html"><strong aria-hidden="true">39.</strong> Using vscode</a></li><li class="chapter-item expanded "><a href="../topics/winmsi.html"><strong aria-hidden="true">40.</strong> Windows MSI installer</a></li><li class="chapter-item expanded affix "><li class="part-title">Raspberry Pi</li><li class="chapter-item expanded "><a href="../topics/pirust.html"><strong aria-hidden="true">41.</strong> Rust in Raspberry Pi</a></li><li class="chapter-item expanded "><a href="../topics/raspberrypi.html"><strong aria-hidden="true">42.</strong> Using Raspberry Pi</a></li><li class="chapter-item expanded "><a href="../topics/embedded.html"><strong aria-hidden="true">43.</strong> Building Embedded System</a></li><li class="chapter-item expanded affix "><li class="part-title">Future</li><li class="chapter-item expanded "><a href="../topics/inspiration.html"><strong aria-hidden="true">44.</strong> Inspiration and plans</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">My software development cookbook</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="linux-from-scratch-part-2"><a class="header" href="#linux-from-scratch-part-2">Linux from scratch (Part 2)</a></h1>
<h2 id="chapter-5-build-toolchain"><a class="header" href="#chapter-5-build-toolchain">Chapter 5, Build Toolchain</a></h2>
<p>In chapter 5, prepare <code>lib</code> folders and go to <code>sources</code> folder, </p>
<pre><code class="language-bash">case $(uname -m) in
 x86_64) mkdir -v /tools/lib &amp;&amp; ln -sv lib /tools/lib64 ;;
esac
cd $LFS/sources
</code></pre>
<h3 id="build-pass-1-binutils"><a class="header" href="#build-pass-1-binutils">Build pass 1 binutils</a></h3>
<pre><code class="language-bash">tar -xvf binutils-2.34.tar.xz
pushd binutils-2.34

mkdir -v build
cd build

../config.guess
../configure --prefix=/tools \
 --with-sysroot=$LFS \
 --with-lib-path=/tools/lib \
 --target=$LFS_TGT \
 --disable-nls \
 --disable-werror

make
make install

# if everything went fine we can remove
popd
rm -rf binutils-2.34
</code></pre>
<h3 id="build-pass-1-gcc"><a class="header" href="#build-pass-1-gcc">build pass 1 gcc</a></h3>
<pre><code class="language-bash">tar -xvf gcc-9.2.0.tar.xz
pushd gcc-9.2.0

tar -xf ../mpfr-4.0.2.tar.xz
mv -v mpfr-4.0.2 mpfr
tar -xf ../gmp-6.2.0.tar.xz
mv -v gmp-6.2.0 gmp
tar -xf ../mpc-1.1.0.tar.gz
mv -v mpc-1.1.0 mpc

for file in gcc/config/{linux,i386/linux{,64}}.h
do
 cp -uv $file{,.orig}
 sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&amp;@g' \
 -e 's@/usr@/tools@g' $file.orig &gt; $file
 echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 &quot;/tools/lib/&quot;
#define STANDARD_STARTFILE_PREFIX_2 &quot;&quot;' &gt;&gt; $file
 touch $file.orig
done

case $(uname -m) in
 x86_64)
 sed -e '/m64=/s/lib64/lib/' \
 -i.orig gcc/config/i386/t-linux64
 ;;
esac

mkdir -v build
cd build

../configure \
 --target=$LFS_TGT \
 --prefix=/tools \
 --with-glibc-version=2.11 \
 --with-sysroot=$LFS \
 --with-newlib \
 --without-headers \
 --with-local-prefix=/tools \
 --with-native-system-header-dir=/tools/include \
 --disable-nls \
 --disable-shared \
 --disable-multilib \
 --disable-decimal-float \
 --disable-threads \
 --disable-libatomic \
 --disable-libgomp \
 --disable-libquadmath \
 --disable-libssp \
 --disable-libvtv \
 --disable-libstdcxx \
 --enable-languages=c,c++

# take a cup of coffee and relax
make
make install

popd
rm -rf gcc-9.2.0
</code></pre>
<h3 id="install-linux-headers"><a class="header" href="#install-linux-headers">Install linux headers</a></h3>
<pre><code class="language-bash">tar -xvf linux-5.5.3.tar.xz
pushd linux-5.5.3

make mrproper
make headers
cp -rv usr/include/* /tools/include

popd
rm -rf linux-5.5.3
</code></pre>
<h3 id="build-glibc"><a class="header" href="#build-glibc">Build Glibc</a></h3>
<pre><code class="language-bash">tar -xvf glibc-2.31.tar.xz
pushd glibc-2.31

mkdir -v build
cd build

../configure \
 --prefix=/tools \
 --host=$LFS_TGT \
 --build=$(../scripts/config.guess) \
 --enable-kernel=3.2 \
 --with-headers=/tools/include

make
make install

popd
rm -rf glibc-2.31
</code></pre>
<p>Test the build,</p>
<pre><code class="language-bash">mkdir test
pushd test
echo 'int main(){}' &gt; dummy.c
$LFS_TGT-gcc dummy.c
readelf -l a.out | grep ': /tools'
popd
rm -rf test
</code></pre>
<p>This should produce output,</p>
<pre><code class="language-text">[Requesting program interpreter: /tools/lib64/ld-linux-x86-64.so.2]
</code></pre>
<p>Note that for 32-bit machines, the interpreter name will be /tools/lib/ld-linux.so.2.</p>
<h3 id="build-libstdc"><a class="header" href="#build-libstdc">Build Libstdc++</a></h3>
<pre><code class="language-bash">tar -xvf gcc-9.2.0.tar.xz
pushd gcc-9.2.0
mkdir -v build
cd build

../libstdc++-v3/configure \
 --host=$LFS_TGT \
 --prefix=/tools \
 --disable-multilib \
 --disable-nls \
 --disable-libstdcxx-threads \
 --disable-libstdcxx-pch \
 --with-gxx-include-dir=/tools/$LFS_TGT/include/c++/9.2.0

make
make install

popd
rm -rf gcc-9.2.0
</code></pre>
<h3 id="build-pass-2-binutils"><a class="header" href="#build-pass-2-binutils">Build pass 2 binutils</a></h3>
<pre><code class="language-bash">tar -xvf binutils-2.34.tar.xz
pushd binutils-2.34

mkdir -v build
cd build

CC=$LFS_TGT-gcc \
AR=$LFS_TGT-ar \
RANLIB=$LFS_TGT-ranlib \
../configure \
 --prefix=/tools \
 --disable-nls \
 --disable-werror \
 --with-lib-path=/tools/lib \
 --with-sysroot

make
make install

make -C ld clean
make -C ld LIB_PATH=/usr/lib:/lib
cp -v ld/ld-new /tools/bin

popd
rm -rf binutils-2.34
</code></pre>
<h3 id="build-pass-2-gcc"><a class="header" href="#build-pass-2-gcc">Build pass 2 gcc</a></h3>
<pre><code class="language-bash">tar -xvf gcc-9.2.0.tar.xz
pushd gcc-9.2.0

tar -xf ../mpfr-4.0.2.tar.xz
mv -v mpfr-4.0.2 mpfr
tar -xf ../gmp-6.2.0.tar.xz
mv -v gmp-6.2.0 gmp
tar -xf ../mpc-1.1.0.tar.gz
mv -v mpc-1.1.0 mpc

cat gcc/limitx.h gcc/glimits.h gcc/limity.h &gt; \
 `dirname $($LFS_TGT-gcc -print-libgcc-file-name)`/include-fixed/limits.h

for file in gcc/config/{linux,i386/linux{,64}}.h
do
 cp -uv $file{,.orig}
 sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&amp;@g' \
 -e 's@/usr@/tools@g' $file.orig &gt; $file
 echo '
#undef STANDARD_STARTFILE_PREFIX_1
#undef STANDARD_STARTFILE_PREFIX_2
#define STANDARD_STARTFILE_PREFIX_1 &quot;/tools/lib/&quot;
#define STANDARD_STARTFILE_PREFIX_2 &quot;&quot;' &gt;&gt; $file
 touch $file.orig
done

case $(uname -m) in
 x86_64)
 sed -e '/m64=/s/lib64/lib/' \
 -i.orig gcc/config/i386/t-linux64
 ;;
esac

sed -e '1161 s|^|//|' \
 -i libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.cc

# take a cup of coffee and relax
make
make install

ln -sv gcc /tools/bin/cc

popd
rm -rf gcc-9.2.0
</code></pre>
<p>Test the build,</p>
<pre><code class="language-bash">mkdir test
pushd test
echo 'int main(){}' &gt; dummy.c
cc dummy.c
readelf -l a.out | grep ': /tools'
popd
rm -rf test
</code></pre>
<p>This should produce output,</p>
<pre><code class="language-text">[Requesting program interpreter: /tools/lib64/ld-linux-x86-64.so.2]
</code></pre>
<p>Note that for 32-bit machines, the interpreter name will be /tools/lib/ld-linux.so.2.</p>
<h3 id="build-tcl"><a class="header" href="#build-tcl">Build Tcl</a></h3>
<pre><code class="language-bash">tar -xvf tcl8.6.10-src.tar.gz
pushd tcl8.6.10

cd unix
./configure --prefix=/tools

make
TZ=UTC make test
make install

chmod -v u+w /tools/lib/libtcl8.6.so
make install-private-headers
ln -sv tclsh8.6 /tools/bin/tclsh

popd
rm -rf tcl8.6.10
</code></pre>
<h3 id="build-expect"><a class="header" href="#build-expect">Build expect</a></h3>
<pre><code class="language-bash">tar -xvf expect5.45.4.tar.gz
pushd expect5.45.4

cp -v configure{,.orig}
sed 's:/usr/local/bin:/bin:' configure.orig &gt; configure

make
make test
make SCRIPTS=&quot;&quot; install

popd
rm -rf expect5.45.4
</code></pre>
<h3 id="build-dejagnu"><a class="header" href="#build-dejagnu">build DejaGNU</a></h3>
<pre><code class="language-bash">tar -xvf dejagnu-1.6.2.tar.gz
pushd dejagnu-1.6.2

./configure --prefix=/tools
make install
make check

popd
rm -rf dejagnu-1.6.2
</code></pre>
<h3 id="build-m4"><a class="header" href="#build-m4">build M4</a></h3>
<pre><code class="language-bash">tar -xvf m4-1.4.18.tar.xz
pushd m4-1.4.18

sed -i 's/IO_ftrylockfile/IO_EOF_SEEN/' lib/*.c
echo &quot;#define _IO_IN_BACKUP 0x100&quot; &gt;&gt; lib/stdio-impl.h

./configure --prefix=/tools
make
make check
make install

popd
rm -rf m4-1.4.18
</code></pre>
<h3 id="build-ncurses"><a class="header" href="#build-ncurses">build Ncurses</a></h3>
<pre><code class="language-bash">tar -xvf ncurses-6.2.tar.gz
pushd ncurses-6.2

sed -i s/mawk// configure
./configure --prefix=/tools \
 --with-shared \
 --without-debug \
 --without-ada \
 --enable-widec \
 --enable-overwrite

make
make install
ln -s libncursesw.so /tools/lib/libncurses.so

popd
rm -rf ncurses-6.2
</code></pre>
<h3 id="build-bash"><a class="header" href="#build-bash">build bash</a></h3>
<pre><code class="language-bash">tar -xvf bash-5.0.tar.gz
pushd bash-5.0

./configure --prefix=/tools --without-bash-malloc

make
make tests
make install
ln -sv bash /tools/bin/sh

popd
rm -rf bash-5.0
</code></pre>
<h3 id="build-bison"><a class="header" href="#build-bison">build bison</a></h3>
<pre><code class="language-bash">tar -xvf bison-3.5.2.tar.xz
pushd bison-3.5.2

./configure --prefix=/tools

make
make check
make install

popd
rm -rf bison-3.5.2
</code></pre>
<h3 id="build-bzip2"><a class="header" href="#build-bzip2">build Bzip2</a></h3>
<pre><code class="language-bash">tar -xvf bzip2-1.0.8.tar.gz
pushd bzip2-1.0.8

make -f Makefile-libbz2_so
make clean
make
make PREFIX=/tools install
cp -v bzip2-shared /tools/bin/bzip2
cp -av libbz2.so* /tools/lib
ln -sv libbz2.so.1.0 /tools/lib/libbz2.so

popd
rm -rf bzip2-1.0.8
</code></pre>
<h3 id="build-coreutils"><a class="header" href="#build-coreutils">build Coreutils</a></h3>
<pre><code class="language-bash">tar -xvf coreutils-8.31.tar.xz
pushd coreutils-8.31

./configure --prefix=/tools --enable-install-program=hostname

make
make RUN_EXPENSIVE_TESTS=yes check
make install

popd
rm -rf coreutils-8.31
</code></pre>
<h3 id="build-diffutils"><a class="header" href="#build-diffutils">build Diffutils</a></h3>
<pre><code class="language-bash">tar -xvf diffutils-3.7.tar.xz
pushd diffutils-3.7

./configure --prefix=/tools

make
make check
make install

popd
rm -rf diffutils-3.7
</code></pre>
<h3 id="build-file"><a class="header" href="#build-file">build File</a></h3>
<pre><code class="language-bash">tar -xvf file-5.38.tar.gz
pushd file-5.38

./configure --prefix=/tools

make
make check
make install

popd
rm -rf file-5.38
</code></pre>
<h3 id="build-findutils"><a class="header" href="#build-findutils">build Findutils</a></h3>
<pre><code class="language-bash">tar -xvf findutils-4.7.0.tar.xz
pushd findutils-4.7.0

./configure --prefix=/tools

make
make check
make install

popd
rm -rf findutils-4.7.0
</code></pre>
<h3 id="build-gawk"><a class="header" href="#build-gawk">build gawk</a></h3>
<pre><code class="language-bash">tar -xvf gawk-5.0.1.tar.xz
pushd gawk-5.0.1

./configure --prefix=/tools

make
make check
make install

popd
rm -rf gawk-5.0.1
</code></pre>
<h3 id="build-gettext"><a class="header" href="#build-gettext">build gettext</a></h3>
<pre><code class="language-bash">tar -xvf gettext-0.20.1.tar.xz
pushd gettext-0.20.1

./configure --disable-shared

make
cp -v gettext-tools/src/{msgfmt,msgmerge,xgettext} /tools/bin

popd
rm -rf gettext-0.20.1
</code></pre>
<h3 id="build-grep"><a class="header" href="#build-grep">build grep</a></h3>
<pre><code class="language-bash">tar -xvf grep-3.4.tar.xz
pushd grep-3.4

./configure --prefix=/tools

make
make check
make install

popd
rm -rf grep-3.4
</code></pre>
<h3 id="build-gzip"><a class="header" href="#build-gzip">build gzip</a></h3>
<pre><code class="language-bash">tar -xvf gzip-1.10.tar.xz
pushd gzip-1.10

./configure --prefix=/tools

make
make check
make install

popd
rm -rf gzip-1.10
</code></pre>
<h3 id="build-make"><a class="header" href="#build-make">build make</a></h3>
<pre><code class="language-bash">tar -xvf make-4.3.tar.gz
pushd make-4.3

./configure --prefix=/tools --without-guile

make
make check
make install

popd
rm -rf make-4.3
</code></pre>
<h3 id="build-patch"><a class="header" href="#build-patch">build patch</a></h3>
<pre><code class="language-bash">tar -xvf patch-2.7.6.tar.xz
pushd patch-2.7.6

./configure --prefix=/tools

make
make check
make install

popd
rm -rf patch-2.7.6
</code></pre>
<h3 id="build-perl"><a class="header" href="#build-perl">build perl</a></h3>
<pre><code class="language-bash">tar -xvf perl-5.30.1.tar.xz
pushd perl-5.30.1

sh Configure -des -Dprefix=/tools -Dlibs=-lm -Uloclibpth -Ulocincpth

make
cp -v perl cpan/podlators/scripts/pod2man /tools/bin
mkdir -pv /tools/lib/perl5/5.30.1
cp -Rv lib/* /tools/lib/perl5/5.30.1

popd
rm -rf perl-5.30.1
</code></pre>
<h3 id="build-python"><a class="header" href="#build-python">build python</a></h3>
<pre><code class="language-bash">tar -xvf Python-3.8.1.tar.xz
pushd Python-3.8.1

sed -i '/def add_multiarch_paths/a \        return' setup.py
./configure --prefix=/tools --without-ensurepip

make
make install

popd
rm -rf Python-3.8.1
</code></pre>
<h3 id="build-sed"><a class="header" href="#build-sed">build sed</a></h3>
<pre><code class="language-bash">tar -xvf sed-4.8.tar.xz
pushd sed-4.8

./configure --prefix=/tools

make
make check
make install

popd
rm -rf sed-4.8
</code></pre>
<h3 id="build-tar"><a class="header" href="#build-tar">build tar</a></h3>
<pre><code class="language-bash">tar -xvf tar-1.32.tar.xz
pushd tar-1.32

./configure --prefix=/tools

make
make check
make install

popd
rm -rf tar-1.32
</code></pre>
<h3 id="build-texinfo"><a class="header" href="#build-texinfo">build Texinfo</a></h3>
<pre><code class="language-bash">tar -xvf texinfo-6.7.tar.xz
pushd texinfo-6.7

./configure --prefix=/tools

make
make check
make install

popd
rm -rf texinfo-6.7
</code></pre>
<h3 id="build-xz"><a class="header" href="#build-xz">build Xz</a></h3>
<pre><code class="language-bash">tar -xvf xz-5.2.4.tar.xz
pushd xz-5.2.4

./configure --prefix=/tools

make
make check
make install

popd
rm -rf xz-5.2.4
</code></pre>
<h3 id="wrap-up"><a class="header" href="#wrap-up">Wrap up</a></h3>
<p>Free 3gb space,</p>
<pre><code class="language-bash">strip --strip-debug /tools/lib/*
/usr/bin/strip --strip-unneeded /tools/{,s}bin/*

rm -rf /tools/{,share}/{info,man,doc}

find /tools/{lib,libexec} -name \*.la -delete

# go back to original login
exit
</code></pre>
<p>Back up the toolchain,</p>
<pre><code class="language-bash">sh bkuptc.sh
</code></pre>
<p>It will create <code>tools.tar.gz</code> in the <code>backup</code> folder in <code>/mnt/c/Users/&lt;user&gt;/Documents/linux/LFS</code>.</p>
<p>Change ownership to root,</p>
<pre><code class="language-bash">sudo chown -R root:root $LFS/tools
</code></pre>
<p>This concludes chapter 5. Go to <a href="lfs3">Part 3</a> for next chapters.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../topics/lfs.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../topics/lfs3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../topics/lfs.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../topics/lfs3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3000/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
